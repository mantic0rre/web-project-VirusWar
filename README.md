# Игра **Война Вирусов**
Логические игры — это отличный способ провести свой досуг не только интересно и весело,  
но и с пользой, развивая наши интеллектуальные навыки.  
Одна из таких игр известна под общим названием "Война вирусов" между двумя или более противниками.   
По ней проходят официальные турниры.

Реализация игры в виде браузерного приложения имеет ряд очевидных преимуществ:
- не нужно ничего качать, достаточно браузера и подключения к интернету;
- простота геймплея и нетребовательность к железу сочетается с широкими возможностями;
- отсутствие привязки к определенному компьютеру.

##  Техническое задание
Реализовать клиент-серверное приложение (сайт), реализующее логическую игру между двумя или более противниками под названием "Война вирусов". Обмен должен быть организован с помощью протоколов HTTP и WebSocket. Сайт должен быть доступен для использования в браузере.  

Основные функциональные требования:
* Необходима поддержка лобби. Это первое место, куда попадает игрок для выбора нужного режима игры. 
* Поддержка комнат. Пользователь должен войти в комнату для начала игры. Список комнат отображается в лобби.
* Поддержка чата в каждой комнате.
* Прочие игровые компоненты.

Технологический стек:  
- Серверная сторона:  
  - Язык программирования *Python*.
  - Фреймфорки *Django*, *Django REST framework*, *Django Channels*.
  - Желательная СУБД - *PostgreSQL*. 
- Клиентская сторона: 
  - фреймворк *Vue.js* (JavaScript, CSS, HTML).
  - маршрутизатор *VueRouter*.
  - библиотека для выполнения запросов *Axios*.
- Автоматизация развёртывания веб-приложения с помощью *Docker*.

## Прототип интерфейса
Дизайн интерфейса и страницы можно посмотреть [вот по этой ссылке](https://www.figma.com/file/D8kZwW1qTQaEEDa3KydxJa/Virus-War?node-id=0%3A1 "Я ссылка")

## Варианты использования
![Use-Case диаграмма](/architecture/images/Use-Case-v1.png "Use-Case диаграмма")

## Описание протокола взаимодействия (основные запросы)

**Главная страница**   
*Запрос*  
Frontend: HTTP GET /   
Backend:  HTTP GET /  

*Ответ*  
Frontend: 200 OK  
Backend:  200 OK

**Авторизация**  
*Запрос*  
Frontend: HTTP GET /  
Backend: HTTP POST /api/login/
```
    body: { "username": <имя пользователя>, 
            "password": <пароль> }  
```

*Ответ*  
Frontend: 200 OK  
Backend: 200 OK | 400 BAD REQUEST  
```    
body: { "token": <token> } 
```

**Регистрация**  
*Запрос*  
Frontend: HTTP GET /  
Backend: HTTP POST /api/register/
```
    body: { "username": <имя пользователя>,
            "password": <пароль> }  
```

*Ответ*  
Frontend: 200 OK  
Backend: 201 CREATED | 400 BAD REQUEST   
```
    body: { "username": <имя пользователя>,
            "id":       <идентификатор> }  
```

**Лобби**  
*Запрос*  
Frontend: HTTP GET /lobby  
Backend:
1. HTTP GET /api/rooms/
    ```
    body: { "my":         <True/False>, 
            "hide_empty": <True/False>,
            "hide_busy":  <True/False>,
            "search":     <search> }   
    ```
2. Запрос на установление соединения WebSocket /ws/lobby

*Ответ*  
Frontend: 200 OK  
Backend: 200 OK | 400 BAD REQUEST 
```
    body: { <список комнат> }  
```

**Создание комнаты**  
*Запрос*  
Frontend: HTTP GET /lobby/create_room  
Backend: HTTP POST /api/rooms
```
    body: { "name":         <название комнаты>,
            "max_players":  <количество игроков>,
            "length":       <длина поля>,
            "width":        <ширина поля>,
            "password":     <пароль, если есть> }
```
    
*Ответ*  
Frontend: 200 OK  
Backend: 201 CREATED | 400 BAD REQUEST  
```
    body: { <данные о комнате + состояния игр> }  
```
    
**Комната**  
*Запрос*  
Frontend: HTTP GET /room/\<id\>  
Backend:
1. HTTP GET /api/rooms/\<id\>  
2. Запрос на установление соединения WebSocket /ws/room/\<id\>  

*Ответ*  
Frontend: 200 OK  
Backend: 200 OK | 404 NOT FOUND  
```
    body: { "room":      <данные о комнате>,
            "messages":  <список последних сообщений>,
            "game"       <данные о состоянии игры> }  
```

**Сообщение в чате**  
*Запрос*  
Frontend: HTTP GET /room/\<id\>  
Backend:  WebSocket /ws/room/\<id\> 
```
    send: { "chat": <сообщение> }
```

*Ответ*  
Frontend: 200 OK  
Backend: WebSocket /ws/room/\<id\>
```
    onmessage: { "chat": <сообщение в чат> }
```

**Подтвердить готовность играть**  
*Запрос*  
Frontend: HTTP GET /room/\<id\>  
Backend:  WebSocket /ws/room/\<id\> 
```
    send:   { "player_place": { 
                "player":   <username>
                "place":    <place_number> }               
            }
```

*Ответ*  
Frontend: 200 OK  
Backend: WebSocket /ws/room/\<id\>  + /ws/lobby
```
    onmessage: { "game": <состоние игры> }
```

## Пользовательские истории

1. Как *гость*, я хочу создать аккаунт, чтобы войти в систему.
2. Как *гость*, я хочу войти в систему, чтобы играть с другими игроками.
3. Как *гость*, я хочу посмотреть правила игры, чтобы ознакомиться с ней.
4. Как *пользователь*, я хочу создать игровую комнату, чтобы настроить свою игру.
5. Как *пользователь*, я хочу осуществлять поиск комнаты, чтобы найти интересующую.
6. Как *пользователь*, я хочу скрыть занятые комнаты, чтобы найти свободные.
7. Как *пользователь*, я хочу скрыть пустые комнаты, чтобы присоединиться к игре, где уже кто-нибудь готов играть.
8. Как *пользователь*, я хочу редактировать список избранных комнат, чтобы иметь возможноть сохранять понравившиеся комнаты.
9. Как *пользователь*, я хочу войти в игровую комнату, чтобы начать играть или просто наблюдать за игрой.
10. Как *пользователь*, я хочу написать в чат комнаты.
11. Как *пользователь*, я хочу видеть сообщения чата комнаты.
12. Как *игрок*, я хочу осуществить ход.
13. Как *игрок*, я хочу получить информацию и ходе противника.


